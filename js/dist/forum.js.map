{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/share-social/webpack/bootstrap","webpack://@fof/share-social/webpack/runtime/compat get default export","webpack://@fof/share-social/webpack/runtime/define property getters","webpack://@fof/share-social/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/share-social/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/share-social/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/share-social/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@fof/share-social/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/share-social/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/share-social/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@fof/share-social/external root \"flarum.core.compat['common/components/SplitDropdown']\"","webpack://@fof/share-social/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/share-social/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/share-social/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/share-social/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/share-social/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/share-social/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@fof/share-social/external root \"flarum.core.compat['common/utils/string']\"","webpack://@fof/share-social/./src/forum/util/share.js","webpack://@fof/share-social/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@fof/share-social/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://@fof/share-social/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://@fof/share-social/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://@fof/share-social/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://@fof/share-social/./node_modules/escape-goat/index.js","webpack://@fof/share-social/./node_modules/pupa/index.js","webpack://@fof/share-social/./src/forum/util/networks.js","webpack://@fof/share-social/./src/forum/components/ShareModal.js","webpack://@fof/share-social/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Discussion'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/SplitDropdown'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/string'];","import app from 'flarum/forum/app';\nimport { getPlainContent, truncate } from 'flarum/common/utils/string';\nimport pupa from 'pupa';\n\nexport const networks = {\n  facebook: '//facebook.com/sharer/sharer.php?u={url}',\n  twitter: '//twitter.com/share?url={url}&text={title}',\n  linkedin: '//linkedin.com/shareArticle?mini=true&url={url}&title={title}&summary={description}',\n  reddit: '//www.reddit.com/submit?url={url}&title={title}',\n  whatsapp: '//api.whatsapp.com/send/?phone&text={title}%20{url}',\n  telegram: '//telegram.me/share/url?url={url}&text={title}',\n\n  vkontakte: '//vk.com/share.php?url={url}&title={title}&description={description}',\n  odnoklassniki: '//connect.ok.ru/offer?url={url}',\n  my_mail: '//connect.mail.ru/share?url={url}&title={title}&description={description}',\n  qq: '//connect.qq.com/widget/shareqq/iframe_index.html?url={url}&title={title}',\n  qzone: '//sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={url}&summary={description}&title={title}',\n\n  native: (data) => navigator.share(getNativeData(data)),\n};\nexport const networkIcons = {\n  vkontakte: 'fab fa-vk',\n  my_mail: 'fas fa-at',\n  qq: 'fab fa-qq',\n  qzone: 'fas fa-star',\n  native: 'fas fa-share-square',\n};\n\nexport const data = (discussion) => {\n  const url = discussion.shareUrl();\n  const title = app.title;\n  const description = (discussion.firstPost() && truncate(getPlainContent(discussion.firstPost()?.contentHtml()), 150, 0)) || '';\n\n  return { url, title, description };\n};\n\nexport const getNativeData = ({ title, description, url }) => ({ title, text: description, url });\n\nexport const canNativeShare = (discussion) => {\n  return navigator.canShare?.(getNativeData(discussion));\n};\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","const _htmlEscape = string => string\n\t.replace(/&/g, '&amp;')\n\t.replace(/\"/g, '&quot;')\n\t.replace(/'/g, '&#39;')\n\t.replace(/</g, '&lt;')\n\t.replace(/>/g, '&gt;');\n\nconst _htmlUnescape = htmlString => htmlString\n\t.replace(/&gt;/g, '>')\n\t.replace(/&lt;/g, '<')\n\t.replace(/&#0?39;/g, '\\'')\n\t.replace(/&quot;/g, '\"')\n\t.replace(/&amp;/g, '&');\n\nexport function htmlEscape(strings, ...values) {\n\tif (typeof strings === 'string') {\n\t\treturn _htmlEscape(strings);\n\t}\n\n\tlet output = strings[0];\n\tfor (const [index, value] of values.entries()) {\n\t\toutput = output + _htmlEscape(String(value)) + strings[index + 1];\n\t}\n\n\treturn output;\n}\n\nexport function htmlUnescape(strings, ...values) {\n\tif (typeof strings === 'string') {\n\t\treturn _htmlUnescape(strings);\n\t}\n\n\tlet output = strings[0];\n\tfor (const [index, value] of values.entries()) {\n\t\toutput = output + _htmlUnescape(String(value)) + strings[index + 1];\n\t}\n\n\treturn output;\n}\n","import {htmlEscape} from 'escape-goat';\n\nexport class MissingValueError extends Error {\n\tconstructor(key) {\n\t\tsuper(`Missing a value for ${key ? `the placeholder: ${key}` : 'a placeholder'}`, key);\n\t\tthis.name = 'MissingValueError';\n\t\tthis.key = key;\n\t}\n}\n\nexport default function pupa(template, data, {ignoreMissing = false, transform = ({value}) => value} = {}) {\n\tif (typeof template !== 'string') {\n\t\tthrow new TypeError(`Expected a \\`string\\` in the first argument, got \\`${typeof template}\\``);\n\t}\n\n\tif (typeof data !== 'object') {\n\t\tthrow new TypeError(`Expected an \\`object\\` or \\`Array\\` in the second argument, got \\`${typeof data}\\``);\n\t}\n\n\tconst replace = (placeholder, key) => {\n\t\tlet value = data;\n\t\tfor (const property of key.split('.')) {\n\t\t\tvalue = value ? value[property] : undefined;\n\t\t}\n\n\t\tconst transformedValue = transform({value, key});\n\t\tif (transformedValue === undefined) {\n\t\t\tif (ignoreMissing) {\n\t\t\t\treturn placeholder;\n\t\t\t}\n\n\t\t\tthrow new MissingValueError(key);\n\t\t}\n\n\t\treturn String(transformedValue);\n\t};\n\n\tconst composeHtmlEscape = replacer => (...args) => htmlEscape(replacer(...args));\n\n\t// The regex tries to match either a number inside `{{ }}` or a valid JS identifier or key path.\n\tconst doubleBraceRegex = /{{(\\d+|[a-z$_][\\w\\-$]*?(?:\\.[\\w\\-$]*?)*?)}}/gi;\n\n\tif (doubleBraceRegex.test(template)) {\n\t\ttemplate = template.replace(doubleBraceRegex, composeHtmlEscape(replace));\n\t}\n\n\tconst braceRegex = /{(\\d+|[a-z$_][\\w\\-$]*?(?:\\.[\\w\\-$]*?)*?)}/gi;\n\n\treturn template.replace(braceRegex, replace);\n}\n","import app from 'flarum/forum/app';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Button from 'flarum/common/components/Button';\nimport classList from 'flarum/common/utils/classList';\nimport { data, networkIcons, networks } from './share';\nimport pupa from 'pupa';\n\nexport const getNetworkButton = ({ network, discussion, isRounded = false }) => {\n  return (\n    <Button\n      className={classList(`Button Button--block Share--${network}`, isRounded && 'Button--rounded')}\n      icon={`${networkIcons[network] || `fab fa-${network}`} fa-lg fa-fw`}\n      onclick={onNetworkButtonClick.bind(this, network, discussion)}\n    >\n      {app.translator.trans(`fof-share-social.lib.networks.${network}`)}\n    </Button>\n  );\n};\n\nexport const onNetworkButtonClick = (network, discussion) => {\n  const payload = data(discussion);\n  const action = networks[network];\n\n  if (typeof action === 'function') {\n    return action(payload);\n  }\n\n  const width = 1000;\n  const height = 500;\n  const top = $(window).height() / 2 - height / 2;\n  const left = $(window).width() / 2 - width / 2;\n  const windowParams = `width=${width}, height= ${height}, top=${top}, left=${left}, status=no, scrollbars=no, resizable=no`;\n\n  for (const dataKey in payload) {\n    payload[dataKey] = encodeURIComponent(payload[dataKey]);\n  }\n\n  window.open(pupa(action, payload), app.title, windowParams);\n};\n\nexport const getNetworkButtons = (discussion, isRounded) => {\n  const list = new ItemList();\n  const networks = app.forum.attribute('fof-share-social.networks');\n  const def = app.forum.attribute('fof-share-social.default');\n\n  for (const network of networks) {\n    // Do not add native share option if not supported\n    if (network === 'native' && !navigator.canShare?.(data(discussion))) continue;\n\n    list.add(network, getNetworkButton({ network, discussion, isRounded }));\n  }\n\n  if (list.has(def)) {\n    list.setPriority(def, 1000);\n  }\n\n  return list;\n};\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport icon from 'flarum/common/helpers/icon';\n\nimport { getNetworkButtons } from '../util/networks';\n\nexport default class ShareModal extends Modal {\n  oninit(vdom) {\n    super.oninit(vdom);\n\n    this.networks = this.attrs.networks;\n    this.discussion = this.attrs.discussion;\n  }\n\n  className() {\n    return 'FofShareSocialModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('fof-share-social.forum.modal.title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <div className=\"Form-group\">{this.shareItems().toArray()}</div>\n        </div>\n      </div>\n    );\n  }\n\n  shareItems() {\n    const items = getNetworkButtons(this.discussion, true);\n    const plainCopy = app.forum.attribute('fof-share-social.plain-copy');\n\n    if (plainCopy) {\n      items.add(\n        'plain-copy',\n        <div className=\"ShareUrl\">\n          <input className=\"FormControl\" type=\"text\" value={this.discussion.shareUrl()} />\n          <Button\n            className={'Button Button--primary'}\n            aria-label={app.translator.trans('fof-share-social.forum.modal.copy_button')}\n            onclick={this.copy.bind(this)}\n          >\n            {icon('fas fa-copy fa-check')}\n          </Button>\n        </div>\n      );\n    }\n\n    return items;\n  }\n\n  onclick(network) {\n    return share(network);\n  }\n\n  copy() {\n    const copyText = document.querySelector('.ShareUrl input');\n    copyText.select();\n    copyText.setSelectionRange(0, 99999);\n    document.execCommand('copy');\n    this.toggleCopyIcon();\n  }\n\n  toggleCopyIcon() {\n    const copyButton = document.querySelector('.ShareUrl button i');\n    copyButton.classList.toggle('fa-copy');\n    setTimeout(() => {\n      copyButton.classList.toggle('fa-copy');\n    }, 3000);\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\nimport Button from 'flarum/common/components/Button';\nimport Model from 'flarum/common/Model';\nimport Discussion from 'flarum/common/models/Discussion';\nimport SplitDropdown from 'flarum/common/components/SplitDropdown';\n\nimport ShareModal from './components/ShareModal';\nimport { getNativeData } from './util/share';\nimport { getNetworkButtons } from './util/networks';\n\nconst getNetworks = () => {\n  let cache = null;\n\n  return (networks, def) => {\n    if (cache) return cache;\n\n    cache = [...networks];\n    const index = cache.indexOf(def);\n\n    if (index !== -1) {\n      cache.splice(index, 1);\n      cache.unshift(def);\n    }\n\n    return cache;\n  };\n};\n\napp.initializers.add('fof/share-social', () => {\n  Discussion.prototype.shareUrl = Model.attribute('shareUrl');\n\n  extend(DiscussionPage.prototype, 'sidebarItems', function (items) {\n    const networks = app.forum.attribute('fof-share-social.networks');\n    const def = app.forum.attribute('fof-share-social.default');\n\n    const isNativeShare = def === 'native';\n    const canNativeShare = isNativeShare && navigator.canShare?.(getNativeData(this.discussion));\n\n    if (def && (!isNativeShare || canNativeShare)) {\n      const list = getNetworkButtons(this.discussion);\n\n      // Use default share button text for native sharing\n      if (isNativeShare) {\n        list.get('native').children = app.translator.trans('fof-share-social.forum.discussion.share_button');\n      }\n\n      if (list.isEmpty()) return;\n\n      items.add(\n        'share-social',\n        <SplitDropdown\n          icon=\"fas fa-share-alt\"\n          buttonClassName=\"Button--share\"\n          accessibleToggleLabel={app.translator.trans('fof-share-social.forum.discussion.share_dropdown_accessible_label')}\n          lazyDraw={true}\n        >\n          {list.toArray()}\n        </SplitDropdown>\n      );\n    } else {\n      items.add(\n        'share-social',\n        <Button\n          class=\"Button Button-icon Button--share\"\n          icon=\"fas fa-share-alt\"\n          onclick={() =>\n            app.modal.show(ShareModal, {\n              networks,\n              discussion: this.discussion,\n            })\n          }\n        >\n          {app.translator.trans('fof-share-social.forum.discussion.share_button')}\n        </Button>,\n        -1\n      );\n    }\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","networks","facebook","twitter","linkedin","reddit","whatsapp","telegram","vkontakte","odnoklassniki","my_mail","qq","qzone","native","data","navigator","share","getNativeData","networkIcons","discussion","_discussion$firstPost","url","shareUrl","title","app","description","firstPost","truncate","getPlainContent","contentHtml","_ref","text","_getPrototypeOf","getPrototypeOf","_construct","Parent","args","Class","Reflect","construct","sham","Proxy","Boolean","valueOf","e","isNativeReflectConstruct","push","apply","instance","Function","bind","arguments","_wrapNativeSuper","_cache","Map","undefined","fn","toString","indexOf","TypeError","has","set","Wrapper","this","value","writable","configurable","_htmlEscape","string","replace","MissingValueError","_Error","_this","name","Error","pupa","template","_temp","_ref$ignoreMissing","ignoreMissing","_ref$transform","transform","_ref2","replacer","placeholder","_step","_iterator","_createForOfIteratorHelperLoose","split","done","property","transformedValue","String","doubleBraceRegex","test","strings","output","_len","length","values","Array","_key","entries","_step$value","index","htmlEscape","getNetworkButton","network","_ref$isRounded","isRounded","m","Button","className","classList","icon","onclick","onNetworkButtonClick","trans","payload","action","windowParams","$","window","height","width","dataKey","encodeURIComponent","open","getNetworkButtons","list","ItemList","attribute","def","canShare","add","setPriority","ShareModal","_Modal","_proto","oninit","vdom","attrs","content","shareItems","toArray","items","type","copy","copyText","document","querySelector","select","setSelectionRange","execCommand","toggleCopyIcon","copyButton","toggle","setTimeout","Modal","Discussion","Model","extend","DiscussionPage","isNativeShare","canNativeShare","class","show","children","isEmpty","SplitDropdown","buttonClassName","accessibleToggleLabel","lazyDraw"],"sourceRoot":""}